<script type="text/html" id="objecteditor">
    <div class="panel panel-default" data-bind="visible:koHasObject" style="width:100%">
        <div class="panel-heading">
            <a href="#" data-bind="click: showProperties">
                <span class="glyphicon" data-bind="css: {'glyphicon-chevron-up' : koShowProperties(), 'glyphicon-chevron-down' : !koShowProperties()}"></span>
                <span data-bind="text: koTitle"></span>
            </a>
        </div>
        <div>
            <table class="table" data-bind="visible:koShowProperties">

                <tbody data-bind="foreach: koProperties">
                    <tr data-bind="click: $parent.changeActiveProperty($data), style: {background: $parent.koActiveProperty() == $data ? 'lightgray': ''}">
                        <td data-bind="text: name" width="50%"></td>
                        <td width="50%">
                            <span data-bind="text: koText, visible: $parent.koActiveProperty() != $data, attr: {title: koText}, style: {color: koIsDefault() ? 'gray' : ''}" style="text-overflow:ellipsis;white-space:nowrap;overflow:hidden"></span>
                            <!-- ko if: editorType == 'text' -->
                            <input type="text" data-bind="value: koValue, visible: $parent.koActiveProperty() == $data" style="padding-right:5px;width:100%" />
                            <!-- /ko -->
                            <!-- ko if: editorType == 'boolean' -->
                            <input type="checkbox" data-bind="checked: koValue, visible: $parent.koActiveProperty() == $data" />
                            <!-- /ko -->
                            <!-- ko if: editorType == 'dropdown' -->
                            <select data-bind="value: koValue, visible: $parent.koActiveProperty() == $data, options: choices"></select>
                            <!-- /ko -->
                            <!-- ko if: editorType == 'itemvalues' -->
                            <div data-bind="visible: $parent.koActiveProperty() == $data, with: itemValues" style="position:absolute; z-index:100; top:parentOffset.top;left:parentOffset.left - 100;background-color:lightgray">
                                <table>
                                    <thead>
                                        <tr>
                                            <th>Value</th>
                                            <th>Text</th>
                                            <th></th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <!-- ko foreach: koItems -->
                                        <tr>
                                            <td><input type="text" data-bind="value:koValue" style="width:100px" /></td>
                                            <td><input type="text" data-bind="value:koText" style="width:100px" /></td>
                                            <td><input type="button" data-bind="click: $parent.onDeleteClick" value="Delete" /></td>
                                        </tr>
                                        <!-- /ko -->
                                        <tr>
                                            <td><input type="text" data-bind="value:koNewValue" style="width:100px" /></td>
                                            <td><input type="text" data-bind="value:koNewText" style="width:100px" /></td>
                                            <td><input type="button" data-bind="click: onAddClick" value="Add" /></td>
                                        </tr>
                                    </tbody>
                                </table>
                                <input type="button" value="Apply" data-bind="click: onApplyClick" />
                            </div>
                            <!-- /ko -->
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</script>